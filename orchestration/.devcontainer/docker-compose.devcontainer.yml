# VS Code Dev Container - Docker Compose Extension
#
# This file extends the development docker-compose for VS Code devcontainers.
# It adds a development container with all necessary tools.

version: '3.8'

services:
  devcontainer:
    image: mcr.microsoft.com/devcontainers/python:1-3.11-bullseye
    volumes:
      - ../..:/workspace:cached
      - devcontainer-venv:/home/vscode/.local
    command: sleep infinity
    environment:
      - PYTHONPATH=/workspace:/workspace/orchestration
      - PROJECT_ROOT=/workspace
      - ORCHESTRATION_ENV=dev
      - DATABASE_URL=postgresql://signals:signals_password@postgres:5432/investment_signals
      - AIRFLOW_WEBSERVER_URL=http://airflow:8080
    depends_on:
      - postgres
    networks:
      - default

volumes:
  devcontainer-venv:

networks:
  default:
    name: investment-signals-dev
